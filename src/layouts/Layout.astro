---
import { Font } from "astro:assets";

import Links from "../components/Links.astro";
import Notes from "../components/Notes.astro";
import type { Author, Note, Link } from "../types/types";

import "../styles/global.css";
import "katex/dist/katex.min.css";
import katex from "katex";
import am2 from "../assets/am2.png";
import cmlab from "../assets/cmlab.png";
import logo from "../assets/logo.png";

interface Props {
  frontmatter: {
    title: string;
    authors: Author[];
    conference?: string;
    notes?: Note[];
    links?: Link[];
    description?: string;
    favicon: string;
    thumbnail?: string;
    theme?: "device" | "light" | "dark";
  };
}

const {
  title,
  description,
  favicon,
  thumbnail,
  authors = [],
  conference,
  notes,
  links,
  theme = "device",
} = Astro.props.frontmatter;

const baseUrl = import.meta.env.BASE_URL;
const prefix = baseUrl.endsWith("/") ? baseUrl : baseUrl + "/";

const jong = authors.find(a => a.name?.includes("Jong Kwon Oh"));
const hw = authors.find(a => a.name?.toLowerCase()?.includes("hyung ju"));
const jih = authors.find(a => a.name?.toLowerCase()?.includes("jihyong"));
const hwijae = authors.find(a => a.name?.toLowerCase()?.includes("hwijae"));

const soStarts = typeof title === "string" && title.startsWith("So");
const rest = soStarts ? title.slice(2) : title;

---

<!doctype html>
<html lang="en" data-theme={theme}>
  <head>
    <meta charset="UTF-8" />
    {description && <meta name="description" content={description} />}
    <meta name="viewport" content="width=device-width" />
    <meta name="generator" content={Astro.generator} />

    <link rel="icon" type="image/png" href={logo.src} />

    <meta property="og:title" content={title} />
    {description && <meta property="og:description" content={description} />}
    <meta property="og:type" content="website" />
    {thumbnail && <meta property="og:image" content={prefix + thumbnail} />}

    <Font cssVariable="--font-noto-sans" preload />

    <title>{title}</title>
  </head>
  <body
    class="font-(family-name:--font-noto-sans) prose prose-lg prose-zinc dark:prose-invert prose-headings:text-center prose-h2:text-center prose-h3:text-center prose-h4:text-center prose-a:text-blue-500 prose-a:dark:text-blue-300 prose-a:no-underline prose-a:hover:underline prose-a:font-normal prose-code:bg-zinc-200 prose-code:dark:bg-zinc-800 prose-code:text-zinc-800 prose-code:dark:text-zinc-200 prose-code:px-1.5 prose-code:py-0.5 prose-code:rounded prose-code:font-medium prose-code:before:content-none prose-code:after:content-none mx-auto max-w-[65rem] bg-white px-8 pt-16 pb-6 dark:bg-zinc-900"
  >
    <header class="flex flex-col items-center relative">
      <img
        src={logo.src}
        alt="Logo background"
        class="absolute -top-10 left-0 w-48 opacity-35 pointer-events-none select-none -z-10 md:w-60 lg:w-72 mix-blend-lighten dark:mix-blend-screen border-none shadow-none"
      />

      <div class="max-w-[80rem] text-center relative z-10">
        <h1 class="text-6xl font-SmallCaps leading-tight break-words relative z-20">
          <span class="bg-gradient-to-r from-blue-500 to-indigo-400 bg-clip-text text-transparent">So</span><span class="bg-gradient-to-r from-indigo-500 to-purple-500 bg-clip-text text-transparent">Fo</span><span class="bg-gradient-to-r from-purple-500 to-pink-500 bg-clip-text text-transparent">N</span><span class="bg-gradient-to-r from-pink-500 to-red-500 bg-clip-text text-transparent">O</span>
          : Arbitrary-Scale Image Super-Resolution via
          <span class="bg-gradient-to-r from-blue-500 to-indigo-500 bg-clip-text text-transparent"> So</span>bolev
          <span class="bg-gradient-to-r from-indigo-500 to-purple-500 bg-clip-text text-transparent"> Fo</span>urier
          <span class="bg-gradient-to-r from-purple-500 to-pink-500 bg-clip-text text-transparent"> N</span>eural
          <span class="bg-gradient-to-r from-pink-500 to-red-500 bg-clip-text text-transparent"> O</span>perator
        </h1>
      </div>

      <div class="flex flex-col items-center gap-5 leading-snug relative z-10">
        {conference && (
          <div class="text-3xl font-semibold tracking-wide text-gray-900 dark:text-gray-100">
            {conference}
          </div>
        )}

        <div class="flex flex-wrap justify-center items-center gap-6 text-xl font-medium text-gray-800 dark:text-gray-200 text-center">
          {jong && (
            <div class="flex flex-row items-center gap-2">
              <span>
                {jong.name}<sup>a</sup>
                {jong.notes && jong.notes.length > 0 ? <sup>{jong.notes.join("")}</sup> : ""}
              </span>
              <img src={am2.src} alt="Applied Mathematics & Machine Learning" class="h-5 w-auto inline-block align-middle" />
            </div>
          )}

          {hwijae && (
            <div class="flex flex-row items-center gap-2">
              <span>
                <a
                  href="https://sites.google.com/view/hwijaeson/home"
                  target="_blank"
                  rel="noopener noreferrer"
                  class="text-blue-500 dark:text-blue-300 no-underline hover:underline font-normal"
                >
                  {hwijae.name}
                </a><sup>b</sup>
                {hwijae.notes && hwijae.notes.length > 0 ? <sup>{hwijae.notes.join("")}</sup> : ""}
              </span>
            </div>
          )}

          {hw && (
            <div class="flex flex-row items-center gap-2">
              <span>
                <a
                  href="https://hjhwang.postech.ac.kr/hjhwang/index.do"
                  target="_blank"
                  rel="noopener noreferrer"
                  class="text-blue-500 dark:text-blue-300 no-underline hover:underline font-normal"
                >
                  {hw.name}
                </a><sup>a</sup>
                {hw.notes && hw.notes.length > 0 ? <sup>{hw.notes.join("")}</sup> : ""}
              </span>
              <img src={am2.src} alt="Applied Mathematics and Machine Learning" class="h-5 w-auto inline-block align-middle" />
            </div>
          )}

          {jih && (
            <div class="flex flex-row items-center gap-2">
              <span>
                <a
                  href="https://cmlab.cau.ac.kr"
                  target="_blank"
                  rel="noopener noreferrer"
                  class="text-blue-500 dark:text-blue-300 no-underline hover:underline font-normal"
                >
                  {jih.name}
                </a><sup>c</sup>
                {jih.notes && jih.notes.length > 0 ? <sup>{jih.notes.join("")}</sup> : ""}
              </span>
              <img src={cmlab.src} alt="Creative Vision and Multimedia" class="h-5 w-auto inline-block align-middle" />
            </div>
          )}
        </div>

        <div class="flex flex-wrap justify-center items-center gap-4 text-base text-gray-700 dark:text-gray-300 leading-tight text-center">
          <span><sup>a</sup> Pohang University of Science and Technology</span>
          <span><sup>b</sup> Konkuk University</span>
          <span><sup>c</sup> Chung-Ang University</span>
        </div>

        <div class="flex flex-col items-center gap-2 text-sm text-gray-600 dark:text-gray-400 text-center leading-snug">
          {notes && (
            <Notes
              class="text-lg font-semibold text-gray-700 dark:text-gray-300 text-center"
              notes={notes}
            />
          )}

          <div class="flex flex-row justify-center items-center gap-8 text-xs text-gray-600 dark:text-gray-400 leading-tight">
            <div class="flex flex-row items-center gap-2">
              <img src={am2.src} alt="Applied Mathematics and Machine Learning" class="h-6 w-auto inline-block align-middle" />
              <span>Applied Mathematics and Machine Learning Lab</span>
            </div>

            <div class="flex flex-row items-center gap-2">
              <img src={cmlab.src} alt="Creative Vision and Multimedia" class="h-6 w-auto inline-block align-middle" />
              <span>Creative Vision and Multimedia Lab</span>
            </div>
          </div>
        </div>

        {links && <Links links={links} />}
      </div>
    </header>

    <main>
      <slot />
    </main>

    <footer class="flex w-full justify-center mt-8">
      <p class="prose-sm text-center">
        This page was built using <a
          href="https://github.com/RomanHauksson/academic-project-astro-template"
          >Roman Hauksson's template</a
        >, adapted from <a
          href="https://github.com/eliahuhorwitz/Academic-project-page-template"
          >Eliahu Horwitz</a
        > and <a href="https://nerfies.github.io/">Keunhong Park</a>. Licensed
        under <a href="http://creativecommons.org/licenses/by-sa/4.0/"
          >CC BY-SA 4.0</a
        >.
      </p>
    </footer>
  </body>
</html>
